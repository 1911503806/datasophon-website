{
  "filename": "add-service.md",
  "__html": "<h2 id=\"1.2-%E6%B7%BB%E5%8A%A0zookeeper\">1.2 添加ZooKeeper <a class=\"header-anchor\" href=\"#1.2-%E6%B7%BB%E5%8A%A0zookeeper\">#</a></h2>\n<p>点击【添加服务】，选择ZooKeeper。</p>\n<p>![img](file:///C:\\Users\\诸葛余\\AppData\\Local\\Temp\\ksohtml19564\\wps21.jpg)</p>\n<p>![img](file:///C:\\Users\\诸葛余\\AppData\\Local\\Temp\\ksohtml19564\\wps22.jpg)</p>\n<p>分配ZooKeeper master服务角色部署节点，zk需部署奇数台。</p>\n<p>![img](file:///C:\\Users\\诸葛余\\AppData\\Local\\Temp\\ksohtml19564\\wps23.jpg)</p>\n<p>Zk没有worker与client服务角色，直接点击【下一步】跳过。</p>\n<p>根据实际情况修改Zk服务配置。</p>\n<p>![img](file:///C:\\Users\\诸葛余\\AppData\\Local\\Temp\\ksohtml19564\\wps24.jpg)</p>\n<p>点击【下一步】，进行zk服务安装。</p>\n<p>![img](file:///C:\\Users\\诸葛余\\AppData\\Local\\Temp\\ksohtml19564\\wps25.jpg)</p>\n<h2 id=\"1.3-%E6%B7%BB%E5%8A%A0hdfs\">1.3 添加HDFS <a class=\"header-anchor\" href=\"#1.3-%E6%B7%BB%E5%8A%A0hdfs\">#</a></h2>\n<p>部署HDFS，其中JournalNode需部署三台，NameNode部署两台，ZKFC和NameNode部署在相同机器上。如下图：</p>\n<p>![img](file:///C:\\Users\\诸葛余\\AppData\\Local\\Temp\\ksohtml19564\\wps26.jpg)</p>\n<p>选择DataNode部署节点。</p>\n<p>![img](file:///C:\\Users\\诸葛余\\AppData\\Local\\Temp\\ksohtml19564\\wps27.jpg)</p>\n<p>根据实际情况修改配置，例如修改DataNode数据存储目录：</p>\n<p>![img](file:///C:\\Users\\诸葛余\\AppData\\Local\\Temp\\ksohtml19564\\wps28.jpg)</p>\n<p>点击【下一步】安装HDFS。</p>\n<h2 id=\"1.4-%E6%B7%BB%E5%8A%A0yarn\">1.4 添加YARN <a class=\"header-anchor\" href=\"#1.4-%E6%B7%BB%E5%8A%A0yarn\">#</a></h2>\n<p>![img](file:///C:\\Users\\诸葛余\\AppData\\Local\\Temp\\ksohtml19564\\wps29.jpg)</p>\n<p>选择两台机器部署ResourceManager。</p>\n<p>![img](file:///C:\\Users\\诸葛余\\AppData\\Local\\Temp\\ksohtml19564\\wps30.jpg)</p>\n<p>![img](file:///C:\\Users\\诸葛余\\AppData\\Local\\Temp\\ksohtml19564\\wps31.jpg)</p>\n<p>![img](file:///C:\\Users\\诸葛余\\AppData\\Local\\Temp\\ksohtml19564\\wps32.jpg)</p>\n<p>默认值如下：</p>\n<p>![img](file:///C:\\Users\\诸葛余\\AppData\\Local\\Temp\\ksohtml19564\\wps33.jpg)</p>\n<p>![img](file:///C:\\Users\\诸葛余\\AppData\\Local\\Temp\\ksohtml19564\\wps34.jpg)</p>\n<h2 id=\"1.5-%E6%B7%BB%E5%8A%A0hive\">1.5 添加Hive <a class=\"header-anchor\" href=\"#1.5-%E6%B7%BB%E5%8A%A0hive\">#</a></h2>\n<p>在数据库中创建Hive数据库。</p>\n<p>![img](file:///C:\\Users\\诸葛余\\AppData\\Local\\Temp\\ksohtml19564\\wps35.png)</p>\n<p>![img](file:///C:\\Users\\诸葛余\\AppData\\Local\\Temp\\ksohtml19564\\wps36.jpg)</p>\n<p>![img](file:///C:\\Users\\诸葛余\\AppData\\Local\\Temp\\ksohtml19564\\wps37.jpg)</p>\n<p>![img](file:///C:\\Users\\诸葛余\\AppData\\Local\\Temp\\ksohtml19564\\wps38.jpg)</p>\n<p>![img](file:///C:\\Users\\诸葛余\\AppData\\Local\\Temp\\ksohtml19564\\wps39.jpg)</p>\n<p>安装HiveServer2时会执行sql创建Hive的表，在个别情况下会因mysql配置导致sql执行失败，可根据实际失败原因修改mysql配置。</p>\n<p>![img](file:///C:\\Users\\诸葛余\\AppData\\Local\\Temp\\ksohtml19564\\wps40.jpg)</p>\n<h2 id=\"1.6-%E6%B7%BB%E5%8A%A0hbase\">1.6 添加Hbase <a class=\"header-anchor\" href=\"#1.6-%E6%B7%BB%E5%8A%A0hbase\">#</a></h2>\n<p>![img](file:///C:\\Users\\诸葛余\\AppData\\Local\\Temp\\ksohtml19564\\wps41.jpg)</p>\n<p>![img](file:///C:\\Users\\诸葛余\\AppData\\Local\\Temp\\ksohtml19564\\wps42.jpg)</p>\n<p>![img](file:///C:\\Users\\诸葛余\\AppData\\Local\\Temp\\ksohtml19564\\wps43.jpg)</p>\n<p>![img](file:///C:\\Users\\诸葛余\\AppData\\Local\\Temp\\ksohtml19564\\wps44.jpg)</p>\n<p>![img](file:///C:\\Users\\诸葛余\\AppData\\Local\\Temp\\ksohtml19564\\wps45.jpg)</p>\n<p>![img](file:///C:\\Users\\诸葛余\\AppData\\Local\\Temp\\ksohtml19564\\wps46.jpg)</p>\n<h2 id=\"1.7-%E6%B7%BB%E5%8A%A0spark3\">1.7 添加Spark3 <a class=\"header-anchor\" href=\"#1.7-%E6%B7%BB%E5%8A%A0spark3\">#</a></h2>\n<p>与上述服务安装类似，详细过程略。</p>\n<h2 id=\"1.8-%E6%B7%BB%E5%8A%A0flink\">1.8 添加Flink <a class=\"header-anchor\" href=\"#1.8-%E6%B7%BB%E5%8A%A0flink\">#</a></h2>\n<p>与上述服务安装类似，详细过程略。</p>\n<h2 id=\"1.9-%E6%B7%BB%E5%8A%A0kafka\">1.9 添加Kafka <a class=\"header-anchor\" href=\"#1.9-%E6%B7%BB%E5%8A%A0kafka\">#</a></h2>\n<p>与上述服务安装类似，详细过程略。</p>\n<h2 id=\"1.10-%E6%B7%BB%E5%8A%A0trino\">1.10 添加Trino <a class=\"header-anchor\" href=\"#1.10-%E6%B7%BB%E5%8A%A0trino\">#</a></h2>\n<p>![img](file:///C:\\Users\\诸葛余\\AppData\\Local\\Temp\\ksohtml19564\\wps47.jpg)</p>\n<p>![img](file:///C:\\Users\\诸葛余\\AppData\\Local\\Temp\\ksohtml19564\\wps48.jpg)</p>\n<p>Trino的worker节点不可与coordinator节点在同一台机器上。</p>\n<p>![img](file:///C:\\Users\\诸葛余\\AppData\\Local\\Temp\\ksohtml19564\\wps49.jpg)</p>\n<p>![img](file:///C:\\Users\\诸葛余\\AppData\\Local\\Temp\\ksohtml19564\\wps50.jpg)</p>\n<p>![img](file:///C:\\Users\\诸葛余\\AppData\\Local\\Temp\\ksohtml19564\\wps51.jpg)</p>\n<h2 id=\"1.11-%E6%B7%BB%E5%8A%A0ranger\">1.11 添加Ranger <a class=\"header-anchor\" href=\"#1.11-%E6%B7%BB%E5%8A%A0ranger\">#</a></h2>\n<p>![img](file:///C:\\Users\\诸葛余\\AppData\\Local\\Temp\\ksohtml19564\\wps52.jpg)</p>\n<p>![img](file:///C:\\Users\\诸葛余\\AppData\\Local\\Temp\\ksohtml19564\\wps53.jpg)</p>\n<p>Ranger没有worker与client角色，可直接跳过。</p>\n<p>![img](file:///C:\\Users\\诸葛余\\AppData\\Local\\Temp\\ksohtml19564\\wps54.jpg)</p>\n<p>配置Ranger的数据库连接信息。</p>\n<p>![img](file:///C:\\Users\\诸葛余\\AppData\\Local\\Temp\\ksohtml19564\\wps55.jpg)</p>\n<p>安装成功后，点击服务配置，开启HDFS和Hive Ranger插件。开启后，点击保存。</p>\n<p>![img](file:///C:\\Users\\诸葛余\\AppData\\Local\\Temp\\ksohtml19564\\wps56.jpg)</p>\n<p>点击HDFS，打开配置，配置Ranger访问地址即Ranger实例的地址，端口默认为6080，</p>\n<p>保存配置后，重启NameNode。</p>\n<p>![img](file:///C:\\Users\\诸葛余\\AppData\\Local\\Temp\\ksohtml19564\\wps57.jpg)</p>\n<p>点击Hive，打开配置，配置Ranger访问地址即Ranger实例的地址，端口默认为6080，</p>\n<p>保存配置后重启HiveServer2。</p>\n<p>![img](file:///C:\\Users\\诸葛余\\AppData\\Local\\Temp\\ksohtml19564\\wps58.jpg)</p>\n<p>通过平台访问Ranger Web Ui添加hivedev</p>\n<p>![img](file:///C:\\Users\\诸葛余\\AppData\\Local\\Temp\\ksohtml19564\\wps59.jpg)</p>\n<p>![img](file:///C:\\Users\\诸葛余\\AppData\\Local\\Temp\\ksohtml19564\\wps60.jpg) 测试连接hiveserver2</p>\n<p>![img](file:///C:\\Users\\诸葛余\\AppData\\Local\\Temp\\ksohtml19564\\wps61.jpg)</p>\n<p>出现以下提示说明连接成功！</p>\n<p>![img](file:///C:\\Users\\诸葛余\\AppData\\Local\\Temp\\ksohtml19564\\wps62.jpg)</p>\n<p>同理，添加hadoopdev，用于HDFS授权。</p>\n<p>![img](file:///C:\\Users\\诸葛余\\AppData\\Local\\Temp\\ksohtml19564\\wps63.jpg)</p>\n<p>![img](file:///C:\\Users\\诸葛余\\AppData\\Local\\Temp\\ksohtml19564\\wps64.jpg)</p>\n<p>注意：Service Name配置固定为hadoopdev，NameNode高可用配置根据提示配置</p>\n<p>![img](file:///C:\\Users\\诸葛余\\AppData\\Local\\Temp\\ksohtml19564\\wps65.jpg)</p>\n<p>点击Add添加。</p>\n",
  "link": "\\zh-cn\\docs\\dir\\add-service.html",
  "meta": {
    "title": "建议配置",
    "keywords": "服务器要求",
    "description": "some description"
  }
}